# ansible.cfg
[defaults]
# Пути
inventory = ./inventory/hosts.yml
roles_path = ./roles
library = ./library
collections_path = ./collections

# SSH настройки
host_key_checking = False
timeout = 30
ssh_args = -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null
scp_if_ssh = True
ssh_pipelining = True

# Производительность
gathering = smart
fact_caching = memory
forks = 10

# Вывод
stdout_callback = yaml
display_skipped_hosts = False
display_ok_hosts = True

# Логирование
log_path = ../log/ansible.log

# Become (sudo) настройки - отключаем по умолчанию
[privilege_escalation]
become = False  # Изменили на False
become_method = sudo
become_user = root
become_ask_pass = False

# SSH соединения
[ssh_connection]
ssh_args = -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s
pipelining = True
timeout = 10
retries = 3

[ssl]
# Отключить проверку SSL для всех модулей
validate_certs = False
